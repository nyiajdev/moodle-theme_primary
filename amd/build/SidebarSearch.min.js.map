{"version":3,"sources":["../src/SidebarSearch.js"],"names":["DATA_KEY","JQUERY_NO_CONFLICT","$","fn","CLASS_NAME_OPEN","CLASS_NAME_ICON_SEARCH","CLASS_NAME_ICON_CLOSE","CLASS_NAME_SEARCH_RESULTS","CLASS_NAME_LIST_GROUP","SELECTOR_DATA_WIDGET","SELECTOR_SEARCH_INPUT","SELECTOR_SEARCH_BUTTON","SELECTOR_SEARCH_ICON","SELECTOR_SEARCH_LIST_GROUP","SELECTOR_SEARCH_RESULTS","SELECTOR_SEARCH_RESULTS_GROUP","Default","arrowSign","minLength","maxResults","highlightName","highlightPath","highlightClass","notFoundText","SearchItems","SidebarSearch","_element","_options","element","options","extend","items","next","length","after","class","children","append","_addNotFound","each","i","child","_parseItem","searchValue","val","toLowerCase","empty","close","searchResults","filter","item","name","includes","endResults","slice","result","_renderItem","link","path","open","parent","addClass","removeClass","hasClass","itemObject","navLink","clone","find","navTreeview","attr","remove","end","text","_trimText","push","newPath","concat","replace","join","regExp","RegExp","str","config","data","plugin","match","init","document","on","event","preventDefault","_jQueryInterface","call","timer","clearTimeout","setTimeout","window","Constructor","noConflict"],"mappings":"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","sourcesContent":["/**\n * --------------------------------------------\n * AdminLTE SidebarSearch.js\n * License MIT\n * --------------------------------------------\n */\n\nimport $, { trim } from 'jquery'\n\n/**\n * Constants\n * ====================================================\n */\n\nconst NAME = 'SidebarSearch'\nconst DATA_KEY = 'lte.sidebar-search'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst CLASS_NAME_OPEN = 'sidebar-search-open'\nconst CLASS_NAME_ICON_SEARCH = 'fa-search'\nconst CLASS_NAME_ICON_CLOSE = 'fa-times'\nconst CLASS_NAME_HEADER = 'nav-header'\nconst CLASS_NAME_SEARCH_RESULTS = 'sidebar-search-results'\nconst CLASS_NAME_LIST_GROUP = 'list-group'\n\nconst SELECTOR_DATA_WIDGET = '[data-widget=\"sidebar-search\"]'\nconst SELECTOR_SIDEBAR = '.main-sidebar .nav-sidebar'\nconst SELECTOR_NAV_LINK = '.nav-link'\nconst SELECTOR_NAV_TREEVIEW = '.nav-treeview'\nconst SELECTOR_SEARCH_INPUT = `${SELECTOR_DATA_WIDGET} .form-control`\nconst SELECTOR_SEARCH_BUTTON = `${SELECTOR_DATA_WIDGET} .btn`\nconst SELECTOR_SEARCH_ICON = `${SELECTOR_SEARCH_BUTTON} i`\nconst SELECTOR_SEARCH_LIST_GROUP = `.${CLASS_NAME_LIST_GROUP}`\nconst SELECTOR_SEARCH_RESULTS = `.${CLASS_NAME_SEARCH_RESULTS}`\nconst SELECTOR_SEARCH_RESULTS_GROUP = `${SELECTOR_SEARCH_RESULTS} .${CLASS_NAME_LIST_GROUP}`\n\nconst Default = {\n  arrowSign: '->',\n  minLength: 3,\n  maxResults: 7,\n  highlightName: true,\n  highlightPath: false,\n  highlightClass: 'text-light',\n  notFoundText: 'No element found!'\n}\n\nconst SearchItems = []\n\n/**\n * Class Definition\n * ====================================================\n */\n\nclass SidebarSearch {\n  constructor(_element, _options) {\n    this.element = _element\n    this.options = $.extend({}, Default, _options)\n    this.items = []\n  }\n\n  // Public\n\n  init() {\n    if ($(SELECTOR_DATA_WIDGET).next(SELECTOR_SEARCH_RESULTS).length == 0) {\n      $(SELECTOR_DATA_WIDGET).after(\n        $('<div />', { class: CLASS_NAME_SEARCH_RESULTS })\n      )\n    }\n\n    if ($(SELECTOR_SEARCH_RESULTS).children(SELECTOR_SEARCH_LIST_GROUP).length == 0) {\n      $(SELECTOR_SEARCH_RESULTS).append(\n        $('<div />', { class: CLASS_NAME_LIST_GROUP })\n      )\n    }\n\n    this._addNotFound()\n\n    $(SELECTOR_SIDEBAR).children().each((i, child) => {\n      this._parseItem(child)\n    })\n  }\n\n  search() {\n    const searchValue = $(SELECTOR_SEARCH_INPUT).val().toLowerCase()\n    if (searchValue.length < this.options.minLength) {\n      $(SELECTOR_SEARCH_RESULTS_GROUP).empty()\n      this._addNotFound()\n      this.close()\n      return\n    }\n\n    const searchResults = SearchItems.filter(item => (item.name).toLowerCase().includes(searchValue))\n    const endResults = $(searchResults.slice(0, this.options.maxResults))\n    $(SELECTOR_SEARCH_RESULTS_GROUP).empty()\n\n    if (endResults.length === 0) {\n      this._addNotFound()\n    } else {\n      endResults.each((i, result) => {\n        $(SELECTOR_SEARCH_RESULTS_GROUP).append(this._renderItem(result.name, result.link, result.path))\n      })\n    }\n\n    this.open()\n  }\n\n  open() {\n    $(SELECTOR_DATA_WIDGET).parent().addClass(CLASS_NAME_OPEN)\n    $(SELECTOR_SEARCH_ICON).removeClass(CLASS_NAME_ICON_SEARCH).addClass(CLASS_NAME_ICON_CLOSE)\n  }\n\n  close() {\n    $(SELECTOR_DATA_WIDGET).parent().removeClass(CLASS_NAME_OPEN)\n    $(SELECTOR_SEARCH_ICON).removeClass(CLASS_NAME_ICON_CLOSE).addClass(CLASS_NAME_ICON_SEARCH)\n  }\n\n  toggle() {\n    if ($(SELECTOR_DATA_WIDGET).parent().hasClass(CLASS_NAME_OPEN)) {\n      this.close()\n    } else {\n      this.open()\n    }\n  }\n\n  // Private\n\n  _parseItem(item, path = []) {\n    if ($(item).hasClass(CLASS_NAME_HEADER)) {\n      return\n    }\n\n    const itemObject = {}\n    const navLink = $(item).clone().find(`> ${SELECTOR_NAV_LINK}`)\n    const navTreeview = $(item).clone().find(`> ${SELECTOR_NAV_TREEVIEW}`)\n\n    const link = navLink.attr('href')\n    const name = navLink.find('p').children().remove().end().text()\n\n    itemObject.name = this._trimText(name)\n    itemObject.link = link\n    itemObject.path = path\n\n    if (navTreeview.length === 0) {\n      SearchItems.push(itemObject)\n    } else {\n      const newPath = itemObject.path.concat([itemObject.name])\n      navTreeview.children().each((i, child) => {\n        this._parseItem(child, newPath)\n      })\n    }\n  }\n\n  _trimText(text) {\n    return trim(text.replace(/(\\r\\n|\\n|\\r)/gm, ' '))\n  }\n\n  _renderItem(name, link, path) {\n    path = path.join(` ${this.options.arrowSign} `)\n\n    if (this.options.highlightName || this.options.highlightPath) {\n      const searchValue = $(SELECTOR_SEARCH_INPUT).val().toLowerCase()\n      const regExp = new RegExp(searchValue, 'gi')\n\n      if (this.options.highlightName) {\n        name = name.replace(\n          regExp,\n          str => {\n            return `<b class=\"${this.options.highlightClass}\">${str}</b>`\n          }\n        )\n      }\n\n      if (this.options.highlightPath) {\n        path = path.replace(\n          regExp,\n          str => {\n            return `<b class=\"${this.options.highlightClass}\">${str}</b>`\n          }\n        )\n      }\n    }\n\n    return `<a href=\"${link}\" class=\"list-group-item\">\n        <div class=\"search-title\">\n          ${name}\n        </div>\n        <div class=\"search-path\">\n          ${path}\n        </div>\n      </a>`\n  }\n\n  _addNotFound() {\n    $(SELECTOR_SEARCH_RESULTS_GROUP).append(this._renderItem(this.options.notFoundText, '#', []))\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    let data = $(this).data(DATA_KEY)\n\n    if (!data) {\n      data = $(this).data()\n    }\n\n    const _options = $.extend({}, Default, typeof config === 'object' ? config : data)\n    const plugin = new SidebarSearch($(this), _options)\n\n    $(this).data(DATA_KEY, typeof config === 'object' ? config : data)\n\n    if (typeof config === 'string' && config.match(/init|toggle|close|open|search/)) {\n      plugin[config]()\n    } else {\n      plugin.init()\n    }\n  }\n}\n\n/**\n * Data API\n * ====================================================\n */\n$(document).on('click', SELECTOR_SEARCH_BUTTON, event => {\n  event.preventDefault()\n\n  SidebarSearch._jQueryInterface.call($(SELECTOR_DATA_WIDGET), 'toggle')\n})\n\n$(document).on('keyup', SELECTOR_SEARCH_INPUT, () => {\n  let timer = 0\n  clearTimeout(timer)\n  timer = setTimeout(() => {\n    SidebarSearch._jQueryInterface.call($(SELECTOR_DATA_WIDGET), 'search')\n  }, 100)\n})\n\n$(window).on('load', () => {\n  SidebarSearch._jQueryInterface.call($(SELECTOR_DATA_WIDGET), 'init')\n})\n\n/**\n * jQuery API\n * ====================================================\n */\n\n$.fn[NAME] = SidebarSearch._jQueryInterface\n$.fn[NAME].Constructor = SidebarSearch\n$.fn[NAME].noConflict = function () {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return SidebarSearch._jQueryInterface\n}\n\nexport default SidebarSearch\n"],"file":"SidebarSearch.min.js"}