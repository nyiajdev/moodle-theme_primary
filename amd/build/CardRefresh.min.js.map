{"version":3,"sources":["../src/CardRefresh.js"],"names":["DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","$","fn","EVENT_LOADED","EVENT_OVERLAY_ADDED","EVENT_OVERLAY_REMOVED","CLASS_NAME_CARD","SELECTOR_CARD","SELECTOR_DATA_REFRESH","Default","source","sourceSelector","params","trigger","content","loadInContent","loadOnInit","responseType","overlayTemplate","onLoadStart","onLoadDone","response","CardRefresh","element","settings","_element","_parent","parents","first","_settings","extend","_overlay","hasClass","Error","_addOverlay","call","get","find","html","_removeOverlay","Event","append","remove","on","load","config","data","_options","match","_init","document","event","preventDefault","_jQueryInterface","each","Constructor","noConflict"],"mappings":"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","sourcesContent":["/**\n * --------------------------------------------\n * AdminLTE CardRefresh.js\n * License MIT\n * --------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * Constants\n * ====================================================\n */\n\nconst NAME = 'CardRefresh'\nconst DATA_KEY = 'lte.cardrefresh'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst EVENT_LOADED = `loaded${EVENT_KEY}`\nconst EVENT_OVERLAY_ADDED = `overlay.added${EVENT_KEY}`\nconst EVENT_OVERLAY_REMOVED = `overlay.removed${EVENT_KEY}`\n\nconst CLASS_NAME_CARD = 'card'\n\nconst SELECTOR_CARD = `.${CLASS_NAME_CARD}`\nconst SELECTOR_DATA_REFRESH = '[data-card-widget=\"card-refresh\"]'\n\nconst Default = {\n  source: '',\n  sourceSelector: '',\n  params: {},\n  trigger: SELECTOR_DATA_REFRESH,\n  content: '.card-body',\n  loadInContent: true,\n  loadOnInit: true,\n  responseType: '',\n  overlayTemplate: '<div class=\"overlay\"><i class=\"fas fa-2x fa-sync-alt fa-spin\"></i></div>',\n  onLoadStart() {\n  },\n  onLoadDone(response) {\n    return response\n  }\n}\n\nclass CardRefresh {\n  constructor(element, settings) {\n    this._element = element\n    this._parent = element.parents(SELECTOR_CARD).first()\n    this._settings = $.extend({}, Default, settings)\n    this._overlay = $(this._settings.overlayTemplate)\n\n    if (element.hasClass(CLASS_NAME_CARD)) {\n      this._parent = element\n    }\n\n    if (this._settings.source === '') {\n      throw new Error('Source url was not defined. Please specify a url in your CardRefresh source option.')\n    }\n  }\n\n  load() {\n    this._addOverlay()\n    this._settings.onLoadStart.call($(this))\n\n    $.get(this._settings.source, this._settings.params, response => {\n      if (this._settings.loadInContent) {\n        if (this._settings.sourceSelector !== '') {\n          response = $(response).find(this._settings.sourceSelector).html()\n        }\n\n        this._parent.find(this._settings.content).html(response)\n      }\n\n      this._settings.onLoadDone.call($(this), response)\n      this._removeOverlay()\n    }, this._settings.responseType !== '' && this._settings.responseType)\n\n    $(this._element).trigger($.Event(EVENT_LOADED))\n  }\n\n  _addOverlay() {\n    this._parent.append(this._overlay)\n    $(this._element).trigger($.Event(EVENT_OVERLAY_ADDED))\n  }\n\n  _removeOverlay() {\n    this._parent.find(this._overlay).remove()\n    $(this._element).trigger($.Event(EVENT_OVERLAY_REMOVED))\n  }\n\n  // Private\n\n  _init() {\n    $(this).find(this._settings.trigger).on('click', () => {\n      this.load()\n    })\n\n    if (this._settings.loadOnInit) {\n      this.load()\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    let data = $(this).data(DATA_KEY)\n    const _options = $.extend({}, Default, $(this).data())\n\n    if (!data) {\n      data = new CardRefresh($(this), _options)\n      $(this).data(DATA_KEY, typeof config === 'string' ? data : config)\n    }\n\n    if (typeof config === 'string' && config.match(/load/)) {\n      data[config]()\n    } else {\n      data._init($(this))\n    }\n  }\n}\n\n/**\n * Data API\n * ====================================================\n */\n\n$(document).on('click', SELECTOR_DATA_REFRESH, function (event) {\n  if (event) {\n    event.preventDefault()\n  }\n\n  CardRefresh._jQueryInterface.call($(this), 'load')\n})\n\n$(() => {\n  $(SELECTOR_DATA_REFRESH).each(function () {\n    CardRefresh._jQueryInterface.call($(this))\n  })\n})\n\n/**\n * jQuery API\n * ====================================================\n */\n\n$.fn[NAME] = CardRefresh._jQueryInterface\n$.fn[NAME].Constructor = CardRefresh\n$.fn[NAME].noConflict = function () {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return CardRefresh._jQueryInterface\n}\n\nexport default CardRefresh\n"],"file":"CardRefresh.min.js"}